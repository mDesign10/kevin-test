{"version":"1.1.5","schemaVersion":28,"minimumStudioVersion":"3.2.0","icon":"other","splash":"other","splashdata":{"img":"FirePaging.png","bg":"#d3161e"},"settings":{"router":{"mode":"single","animation":"off"},"theme":"default","push-notifications":{"android":{"enabled":false},"ios":{"enabled":false,"voipEnabled":true},"wp":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"kioskMode":{"enabled":false},"singleInstance":{"enabled":true},"crosswalk":{"enabled":false},"wkwebview":{"enabled":true},"logging":{"enabled":true,"bufferFrequency":100,"defaultRootLogLevel":"debug","defaultMaxFileSizeKilobyte":5000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"loading-message":false,"minimise-on-back-button":true,"insomnia":{"enabled":true,"battOp":true,"fgService":true,"fgServiceMain":"Responder","fgServiceSub":"Listening for messages...","startOnBoot":true,"appRestartService":true,"backgroundAlarm":true,"nativeSetTimeout":true},"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.2.4":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-network-information@2.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.6-dev-ct-0.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-media-capture@1.4.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.7":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.10":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.fileimporter@1.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.13":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.17":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.4":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.audio@0.9.26":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.media-properties@1.2.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@0.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.43":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.logging@1.0.24":{"override":false,"used":true,"enabled":true},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.3.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-wkwebview-engine@1.1.4":{"override":false,"used":true,"enabled":true},"cordova-plugin-wkwebview-file-xhr@2.1.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-emm-app-config@1.0.2":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.12":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.messaging@0.0.47":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.47":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.settimeout@0.0.1":{"override":true,"used":false,"enabled":true},"com.commontime.cordova.insomnia@0.0.48":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.settimeout@0.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.50":{"override":false,"used":true,"enabled":true},"cio.gvox.plugin.phonecalltrap@0.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-headsetdetection@3.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.14":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.21":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.51":{"override":true,"used":true,"enabled":false}},"customPlugins":{"crosswalk":{"id":"crosswalk","spec":"https://github.com/crosswalk-project/cordova-plugin-crosswalk-webview#2.4.0","preferences":{}},"cordova-build-architecture":{"id":"cordova-build-architecture","spec":"https://github.com/MBuchalik/cordova-build-architecture.git#v1.0.4","preferences":{}},"Display over other app":{"id":"Display over other app","spec":"https://github.com/commontime/com.commontime.cordova.displayoverotherapps#1.1.1","preferences":{},"variables":{"BACKGROUNDCOLOR":"0fb1ca","TEXTCOLOR":"ffffff","BUTTONBACKGROUNDCOLOR":"1b2341","BUTTONTEXTCOLOR":"ffffff"}},"com.commontime.cordova.insomnia":{"id":"com.commontime.cordova.insomnia","spec":"https://github.com/commontime/com.commontime.cordova.insomnia#0.0.53-tvfs","name":"Sleep Prevention","preferences":{"WAKELOCK":"true","BATTOP":"true","FGSERVICEENABLED":"true","FGSERVICEMAIN":"Responder","FGSERVICESUB":"Waiting for messages...","STARTONBOOT":"true","APPRESTARTSERVICE":"true","BACKGROUNDALARM":"true"}},"cordova-ios-voip-push":{"id":"cordova-ios-voip-push","spec":"https://github.com/commontime/cordova-ios-voip-push#1.0.4-tvfs","name":"VOIP Push Notification Plugin"}}}},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"pages":[{"start":true,"name":"Login","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"b098ef78-7965-4119-9260-f37189e64199","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.year = new Date().toISOString().substring(0,4);"},"_auto_id_":"a0bccd80-8e64-46fd-8348-c0db2ffd800f"}]}],"content":[{"name":"staticLogin","type":"area","item-type":"static","content":[{"name":"ConsoleLogo","type":"media","item-type":"image-viewer","scaleImage":true,"maxWidth":200,"maxHeight":200,"fileName":"bucks logo.png","actions":[],"expressions":{},"_auto_id_":"6d9fbf6d-956c-49ac-8530-e0c3d1a86662","openExternallyOnClick":false},{"name":"htmlTitle","type":"content","item-type":"html","content":"<h1><span>Intelligent</span> Paging</h1>\n<h3>Streamlined team communication.</h3>","expressions":{},"_auto_id_":"3d0f6680-9779-4876-baa3-a72ec9fafd93"},{"name":"pgLoginForm","type":"messaging-common","item-type":"common-login-form","autoAppendDomainName":true,"username":"","hideUsername":false,"disableUsername":false,"actions":[],"expressions":{},"layer":"pl_responder","_auto_id_":"d81dcf5e-5e2c-4fb8-ac68-c66b2c68ef6c"},{"name":"htmlTerms","type":"content","item-type":"html","_auto_id_":"c9feba6e-98d1-48f7-9006-6a77fb4aa493","content":"<p>&copy; CommonTime {{'$store.variables.year'|store}}<br>\n<small>IP {{'$store.schema.version'|store}} - b{{'$store.preferences.studioBuildNumber' | store}} | {{'$store.preferences.customerReleaseNumber' | store}}</small></p>\n","expressions":{}}],"expressions":{},"_auto_id_":"2f5d45fe-7a88-4eaf-947d-eea31f4ca7b4"}]},{"start":false,"name":"PagerList","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row","_auto_id_":"c8c94edd-c2e4-4734-9d9d-a7389023111b"},"content":[{"name":"pgOnlineIndicator","type":"messaging-common","item-type":"common-online-indicator","layer":"pl_responder","expressions":{},"_auto_id_":"951a0aca-c716-4fc0-8dc9-7b98cc31f00e"},{"name":"btnLogout","type":"button","item-type":"button","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"common-log-out","data":{"layer":"pl_responder"},"_auto_id_":"71555509-e2dc-40e2-860e-3317f3e5e22d"}],"_auto_id_":"3da82e4e-45ff-41ac-8e2d-ebffcc64cfda"},{"actions":[{"data":{"isConditional":false,"name":"About"},"event":"click","type":"go-to-page","_auto_id_":"24991718-b568-45ea-8ab3-ca0c90b7b176"}],"content":"","expressions":{},"item-type":"button","left-icon":"fa-info","name":"btnAbout","theme":"default","type":"button","_auto_id_":"2385cb59-dc6d-4518-b089-feb7202f6530"}],"_auto_id_":"e3e50ee8-a56a-476b-953f-a3ff1eb40538"},{"name":"staticListContainer","type":"area","item-type":"static","content":[{"name":"pgList","type":"pager","item-type":"pg-list","expressions":{},"actions":[],"layer":"pl_responder","_auto_id_":"efc7d575-7c1f-4d4c-8563-279a343f3b4f"},{"name":"html_group","type":"content","item-type":"html","_auto_id_":"59d176cf-6a63-4405-931e-39d1e9a3ae45","content":"{{'$store.api.api_flowtime.currentgroups[0].name'|store}}{{'$store.api.api_flowtime.currentgroups[1].name'|store}}","expressions":{}}],"_auto_id_":"62ad0734-6068-48ee-8d85-38afefdd4a15"}]},{"config":[],"name":"About","start":false,"content":[{"content":[{"actions":[{"data":{"isConditional":false,"name":"PagerList"},"event":"click","type":"go-to-page","_auto_id_":"7af55fa5-80cb-44db-b495-4919305663ca"}],"content":"","expressions":{},"item-type":"button","left-icon":"fa-arrow-left","name":"btnBack","theme":"default","type":"button","_auto_id_":"2281c0e2-6c23-409c-b9b3-30bf43d8d886"}],"extends":{"item-type":"row","type":"area","_auto_id_":"144254c2-75e4-4933-b7f3-1bf58845b066"},"item-type":"title-bar","name":"title_bar","type":"area","_auto_id_":"8e0a546b-7b7d-452a-8522-1b256f141466"},{"content":[{"name":"btnChangeGroup","type":"button","item-type":"button","_auto_id_":"cfa0ef01-017e-4962-a7a0-ed741b6b0228","content":"Change Group","theme":"default","left-icon":"fa-group","actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"api_flowtime","operation":"groups","params":{"user":"{{$store.variables.username}}"}},"_auto_id_":"4e541a91-1f49-4f02-96af-68fb0bb26acd","actions":[{"event":"success","type":"go-to-page","data":{"name":"Groups","isConditional":false},"_auto_id_":"ac41e8e4-3a4b-49f2-9026-21a464c6a035"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"api_error"},"_auto_id_":"dde0cb32-fdbb-47c1-b71a-31174eb950b3"}]}],"expressions":{}},{"name":"htmlSettings","type":"content","item-type":"html","_auto_id_":"9c0130e8-5781-4416-a0cc-021ceec88edc","content":"<h2>Settings</h2>","expressions":{}},{"_auto_id_":"8d3bc07d-bb23-4967-8c64-55a95f6116b6","actions":[{"_auto_id_":"e2a2a785-2684-4884-bec7-910b2265271c","actions":[],"data":{"code":"const theme = cti.store.pages.About.switchTheme;\nlet newTheme = \"\";\n\nif (theme) {\n  \n  newTheme = \"dark\";\n}\n\n$success(newTheme);","sync":true},"event":"change","type":"inline-function"},{"_auto_id_":"4309b61a-74de-451b-881d-d99f4d136a52","data":{"layer":"pl_responder","themeName":"{{$data}}"},"event":"change","type":"common-change-theme"}],"expressions":{},"item-type":"switch","label":"Theme:","name":"switchTheme","off-text":"Dark","on-text":"Light","required":false,"type":"choice","validators":[]},{"name":"switchThemeAutomatic","type":"choice","item-type":"switch","_auto_id_":"1d47203e-ad10-49af-9bd2-43bebf3ce74b","label":"Day/Night Mode: ","required":false,"on-text":"On","off-text":"Off","validators":[],"expressions":{}},{"name":"switchDND","type":"choice","item-type":"switch","_auto_id_":"fb1996ad-3833-40e0-a43a-0f61ca2c3801","label":"Do Not Disturb: ","required":false,"on-text":"On","off-text":"Off","validators":[],"expressions":{}},{"content":"<h2>Support</h2>\n \n<p>For help or support please contact the ICT Service Desk via:</p>\n \n<p><strong>Phone:</strong> <a href=\"tel:01296 744455\">01296 744455</a></p>\n \n<p><strong>Email:</strong> <a href=\"mailto:ictservicedesk@bucksfire.gov.uk\">ictservicedesk@bucksfire.gov.uk</a></p>","expressions":{},"item-type":"html","name":"htmlAbout","type":"content","_auto_id_":"a1ade674-82e3-4a1b-8a03-451ad4f389a0"},{"actions":[{"data":{"code":"if (cti.store.pages.About.switchLogging) {\n  console.log(\"Enabling support logging...\");\n  pagerLayer.setSupportLoggingTypes();\n}\nelse {\n  console.log(\"Disabling support logging...\");\n  pagerLayer.resetSupportLogging();\n}\n\n$success();","sync":true},"event":"change","type":"inline-function","_auto_id_":"e95ed6d3-8929-443c-82da-af4dc3bfb643"}],"description":"","expressions":{},"item-type":"switch","label":"Support Logging:","name":"switchLogging","off-text":"Off","on-text":"On","required":false,"type":"choice","validators":[],"_auto_id_":"085bba61-f986-41a0-898c-3f944b78b0f1"},{"actions":[{"data":{"body":"Please see attached logs from the Pager Responder app.","includeArchivedLogs":true,"subject":"Pager app support logs","to":"ictservicedesk@bucksfire.gov.uk"},"event":"click","type":"email-logs","_auto_id_":"0cfeb919-7a40-4fbe-8f75-5bc1bc9919b4"}],"content":"Email Support Logs","expressions":{},"item-type":"button","left-icon":"fa-envelope-o","name":"btnEmailLogs","theme":"default","type":"button","_auto_id_":"eb02905e-84e2-4ff7-858c-829edb620979"},{"name":"nav_about_commontime","type":"button","item-type":"nav-button","_auto_id_":"602d2eac-30cb-4a24-b4ed-a6a3efcb5df4","extends":{"type":"button","item-type":"button"},"content":"About","actions":[{"event":"click","type":"go-to-page","data":{"name":"CommonTime","isConditional":false}}],"expressions":{},"theme":"minimal"}],"expressions":{},"item-type":"scrollable","name":"scrlAbout","type":"area","_auto_id_":"68b12cd8-fd69-4aa7-a1bd-7bce9cccf4d3"}]},{"start":false,"name":"Groups","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnBack","type":"button","item-type":"nav-button","_auto_id_":"f770b3ac-2321-4dfa-94ad-a261f6c2d998","extends":{"type":"button","item-type":"button"},"content":"","actions":[{"event":"click","type":"go-to-page","data":{"name":"PagerList","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-arrow-left"}],"_auto_id_":"e2830c27-8105-402a-9d40-0b65a057ffe8","expressions":{}},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"select_group","type":"choice","item-type":"select","_auto_id_":"ab267346-1911-4853-817e-c1185d0b400c","label":"Select New Group: ","required":false,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"option-source":"$store.api.api_flowtime.groups","label-property":"name","value-property":"id","validators":[],"actions":[],"expressions":{}},{"name":"btnChangeGroup","type":"button","item-type":"button","_auto_id_":"f4a9e97e-5fe0-4a8f-93ea-2c85633514f9","content":"Apply","theme":"default","expressions":{"disabled":"$store.pages.Groups.select_group == undefined"},"actions":[{"event":"click","type":"call-api","data":{"sync":true,"name":"api_flowtime","operation":"changegroup","params":{"user":"{{$store.variables.username}}","groupid":"{{$store.pages.Groups.select_group.value}}"}},"_auto_id_":"fe84859a-66e1-4610-a4ce-1c307115c0c5","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"cti.store.api.api_flowtime.currentgroups = [\n  {\n    \"name\": cti.store.pages.Groups.select_group.label\n  }\n];\n\n$success();"},"_auto_id_":"ea95f53b-b2c2-447d-9de2-b067c9a19302"},{"event":"success","type":"go-to-page","data":{"name":"PagerList","isConditional":false},"_auto_id_":"c586cfe8-a26d-422f-b26a-268b08d92880"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"api_error"},"_auto_id_":"025f7b3e-f7c6-4442-a789-7a4731f605d4"}]}]}],"_auto_id_":"38c5d5ad-2890-4101-9f9c-37044df2656b"}]},{"start":false,"name":"CommonTime","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnBack","type":"button","item-type":"nav-button","_auto_id_":"b2c0964a-3820-4ccf-a30e-8ac1af3dfb35","extends":{"type":"button","item-type":"button"},"content":"","actions":[{"event":"click","type":"go-to-page","data":{"name":"About","isConditional":false}}],"expressions":{},"theme":"default","left-icon":"fa-arrow-left"}],"_auto_id_":"87503f64-ec66-4a9e-ab59-16ec1b4e2a06"},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"htmlAbout","type":"content","item-type":"html","_auto_id_":"38c8b8c1-0848-46ad-b480-696f02855993","content":"<h2>About</h2>\n<p><strong>Intelligent Paging</strong> is a new breed of communication tool, designed and developed by CommonTime to facilitate two-way conversations, broadcasts and alerts in high pressure environments.</p>\n\n<p>CommonTime develop market leading communication apps that deliver practical innovation to organisations across the world. Backed by over 20 years of experience, our secure & reliable solutions are vital to mobilising enterprise and government communication. To find out more about CommonTime, visit: <a href=\"https://www.commontime.com\" target=\"_blank\">www.commontime.com</a>.</p>\n</p>\n\n<p class=\"versions\">\n  <span>Customer Release: {{'$store.preferences.customerReleaseNumber' | store}}</span><br>\n  <span>Pager Version: {{'$store.schema.version'|store}} - b{{'$store.preferences.studioBuildNumber' | store}}</span><br>\n</p>","expressions":{}}],"_auto_id_":"0405d22e-8a1b-42b0-93dd-c4f4c0b8ea4d"},{"name":"static_logo","type":"area","item-type":"static","_auto_id_":"34b4f021-d2e8-4006-980b-63423ec7eb03","content":[{"name":"ctLogo","type":"media","item-type":"image-viewer","_auto_id_":"fa945c92-e134-4eca-9b80-a91014e4dc67","scaleImage":true,"maxWidth":200,"maxHeight":200,"openExternallyOnClick":false,"fileName":"CommonTime 1.png","actions":[],"expressions":{}}],"expressions":{}}]}],"actionflows":[{"name":"message_received","content":[{"data":{"code":"if (pagerLayer.getCurrentUserJid()) {\n    \n    $success();\n}","sync":true},"event":"click","type":"inline-function","_auto_id_":"74676106-ce15-4abe-ad3e-5c1e32294d69","actions":[]},{"data":{"code":"if (!window.runningReceivedActionFlow) {\n    \n    window.runningReceivedActionFlow = true;\n\t$success();\n}","sync":true},"event":"click","type":"inline-function","_auto_id_":"83cca20f-ea4a-48c5-83bc-f207c2d68d25","actions":[]},{"event":"click","type":"stop-audio","_auto_id_":"4979c57c-5bdb-441c-8b23-62903af197e5"},{"event":"click","type":"stop-vibration","_auto_id_":"e5675f1f-975b-4c66-924c-72a05f864cf4"},{"event":"click","type":"start-vibration","data":{"pattern":"100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100","customPattern":"","duration":1000,"patternIterations":1,"continuous":true,"force":true},"_auto_id_":"9d0f0b27-5970-42f9-b729-b892518d69b9"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"if (window.cti.store.env.platform.name === \"android\") { \n    // First go\n    window.plugins.insomnia.switchOnScreenAndForeground(function() {$success();}, function() {$fail();}, {});\n  \n    // Second go\n    setTimeout(function() {window.plugins.insomnia.switchOnScreenAndForeground(function() {}, function() {}, {});}, 1500);\n} else if (window.cti.store.env.platform.name === \"ios\"){\n  plugins.insomnia.switchOnScreenAndForeground();\n}\n$success();\n"},"actions":[],"_auto_id_":"cf710fa3-d359-4293-b8fb-2409c3492d41"},{"type":"if","data":{},"_auto_id_":"fe642ac7-932b-4235-b261-f5f14a585b4a","operations":[{"type":"value","content":"{{$store.pages.About.switchDND}}","$selected":false},{"type":"operator","content":"!=","$selected":false},{"type":"value","content":"true","$selected":false}]},{"type":"if","data":{},"_auto_id_":"8752bd40-c656-4bba-8d48-3ce900b5e828","operations":[{"type":"value","content":"{{$store.variables.in_alert}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"get-media-volume","data":{"streamId":"alarm"},"_auto_id_":"d37e683d-a091-404e-8938-10f6346d9603"},{"event":"click","type":"set-variable","data":{"name":"stored_volume","value":"{{$data}}"},"_auto_id_":"3d29183a-01e1-4f78-92c9-691c4c6986ea"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"true"},"_auto_id_":"d19d8f74-347e-46f3-93f9-89f725a66fb4"},{"type":"end-if","data":{},"_auto_id_":"d59691b9-669e-42c6-8fd8-6388e8db34bc"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"var volume = 100;\nif (device.manufacturer == \"samsung\") {\n  if ($store.state.phoneCallState == \"OFFHOOK\") {\n    volume = 50;      \n  }\n  if(!window.HeadsetDetection) {\n    $success(volume);\n    return;\n  }\n  HeadsetDetection.detect(headset => {\n      if(headset) volume = 50;\n     $success(volume);\n  }, e => {\n     console.error(e);\n     $success(volume);\n  });\n} else {\n    $success(volume);\n}\n"},"_auto_id_":"882f443b-401d-496e-a651-c7abaabf6352"},{"event":"click","type":"change-media-volume","data":{"volumeLevel":"{{$data}}","streamId":"alarm"},"_auto_id_":"456244f9-b040-48f7-9722-bf6c7b50c4c8"},{"type":"if","data":{},"_auto_id_":"817cb0e9-60ab-4453-92ac-ad485f403c53","operations":[{"type":"value","content":"{{$store.variables.message.pageType.name}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Test Call","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"fileName":"TestCall.m4a","streamId":"alarm","loop":true,"loopCount":10,"loopInterval":0.9},"_auto_id_":"8be7aedc-04e9-4b17-b9e6-2e7ae30ebb06"},{"type":"otherwise-if","data":{},"_auto_id_":"7fb69205-c4da-46cd-bda0-f66b2cd06dd6","operations":[{"type":"value","content":"{{$store.variables.message.pageType.name}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Standby Call","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","fileName":"Standby4.m4a","loop":false,"loopInterval":0.9,"loopCount":1},"_auto_id_":"175a334c-2a54-47e8-9eb2-fb6a7cf572ba"},{"type":"otherwise-if","data":{},"_auto_id_":"a4d217cc-58f0-4630-ad75-6bdd04b1840f","operations":[{"type":"value","content":"{{$store.variables.message.pageType.name}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Insufficient Crew","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","fileName":"Insufficent.m4a","loop":true,"loopInterval":0.9,"loopCount":2},"_auto_id_":"52efb721-7b7b-46e8-bd28-aa6dee8d30b0"},{"type":"otherwise-if","data":{},"_auto_id_":"37aeefc1-6309-4e05-9d62-40cdc6633c50","operations":[{"type":"value","content":"{{$store.variables.message.pageType.name}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Stand Down Crew","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","fileName":"Standown.m4a","loop":true,"loopInterval":0.9,"loopCount":2},"_auto_id_":"263c69e7-67f6-4ab7-88d1-3a9c6c0e8d0b"},{"type":"otherwise-if","data":{},"_auto_id_":"263c5c88-884f-43e9-a591-cbcba4f50541","operations":[{"type":"value","content":"{{$store.variables.message.pageType.name}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Admin Message","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","fileName":"AdminMsg4.m4a","loop":false,"loopInterval":0.9,"loopCount":2},"_auto_id_":"40399131-8556-4593-bf8e-a43dd382f127"},{"type":"otherwise","data":{},"_auto_id_":"08c5c5ba-87d5-4c06-ab1e-ea808f01232d"},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","fileName":"FireCall4.m4a","loop":false,"loopInterval":0.9,"loopCount":1},"_auto_id_":"22216777-e2b3-4f1d-b92c-713f5f79c7fd"},{"type":"end-if","data":{},"_auto_id_":"d3f9556c-1843-4e75-a458-e2741d3abc55"},{"type":"end-if","data":{},"_auto_id_":"0bd14b41-21b6-413c-9d87-80cbd7097e98"},{"data":{"code":"window.runningReceivedActionFlow = false;\n$success();","sync":true},"event":"click","type":"inline-function","_auto_id_":"c247de7a-b232-475d-ad76-4ea79dbf330f"}]},{"name":"message_responded","content":[{"event":"click","type":"stop-vibration","data":{},"_auto_id_":"935ebf95-36da-421b-9185-6e46063822da"},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"4ebc3b59-8c60-4ec3-8f68-e00af81273bd"},{"type":"if","data":{},"_auto_id_":"f5c60ffd-a599-421b-b55a-70089799f3c7","operations":[{"type":"value","content":"{{$store.pages.About.switchDND}}","$selected":false},{"type":"operator","content":"!=","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"change-media-volume","data":{"volumeLevel":"{{$store.variables.stored_volume}}","streamId":"alarm"},"_auto_id_":"d132cd62-d793-4f00-bffa-708429453d7d"},{"type":"end-if","data":{},"_auto_id_":"34f099cf-ab8b-4f2d-a11d-15bcb4f65be8"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"if (window.cti.store.env.platform.name === \"android\") { \n\n  window.plugins.insomnia.clearKeepScreenOn(function() {\n    $success();\n  }, function() {\n    $fail();\n  });\n\n} else {\n  $success();\n}"},"actions":[],"_auto_id_":"00b32248-3d41-4940-a4ce-fd05855a3871"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"false"},"_auto_id_":"385b132d-7363-45f4-a391-8368a030583c"}]},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if ($store.env.platform.name === \"ios\") {\n  \tif ($store.variables.debug === true) console.log(\"Disabling Insomnia...\");\n\twindow.plugins.insomnia.disable(() => {\n    \tif ($store.variables.debug === true) console.log(\"Insomnia successfully disabled.\");\n      \t$success();\n    }, (e) => { \n      \tconsole.error(\"There was an error disabling Insomnia, the app will continue to be kept running in the background:\", e);      \n        $fail();\n    });  \n} else {\n    // Still need to continue for non-ios platforms\n\t$success();  \n}"},"_auto_id_":"1ec9cfbb-432d-425e-b0b5-b6c00323ab41","actions":[]}],"name":"disable_insomnia"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// If we don't have any stored credentials then we don't want to enable insomnia\nconst pagerLayer = window.CtPagerLayer.getInstance(\"pl_responder\");\nif ($store.env.platform.name === \"ios\" && pagerLayer.getCurrentUserJid()) {\n  if ($store.variables.debug === true) console.log(\"Enabling Insomnia...\");\n  window.plugins.insomnia.enable(() => {\n  \t// Start a timer to disable Insomnia after the page TTL\n    clearTimeout(window.__insomniaTimeout);\n    window.__insomniaTimeout = setTimeout(() => {\n    \twindow.cti.utils.callActionflow(\"disable_insomnia\");\n    }, CtPagerLayer.getInstance(\"pl_responder\").config.xmpp.maxMessageAlertAge || 3.6e+6);\n    if ($store.variables.debug === true) console.log(\"Insomnia successfully enabled.\");\n    $success();\n  }, (e) => { \n    console.error(\"There was an error enabling Insomnia:\", e);\n    $fail(e);\n  }); \n} else {\n    // Nothing to do so continue as normal\n\t$success();  \n}"},"_auto_id_":"85a5436a-fcfb-4913-a557-0865ab5af556","actions":[]}],"name":"enable_insomnia"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if ($store.variables.debug === true) console.log(\"New Page Received:\", $data);\nif ($store.env.platform.name === \"ios\" && $data && $data.$message) {\n  \tconst messageTs = $data.$message.ts;\n  \t// Keep track of the message timestamps we've seen to avoid needlessly enabling insomnia\n  \tif ($store.variables.pageTs < messageTs) $store.variables.pageTs = messageTs;\n  \tif (messageTs >= $store.variables.pushTs) {\n  \t\tif ($store.variables.debug === true) console.log(\"New message arrived with a timestamp >= to the stored value, so disabling Insomnia...\");\n\t\t$store.variables.pushTs = 0;\n    \t// Disable insomnia\n  \t\t$success(); // This will call the disable_insomnia actionflow within the \"Actions\" tab of this inline function\n    } else {\n    \t// Dont disable insomnia\n\t\t$fail();  \n\t} \n} else {\n    // Dont disable insomnia\n\t$fail();  \n}"},"actions":[{"event":"success","type":"call-actionflow","data":{"name":"disable_insomnia"},"_auto_id_":"cb3e4ba1-e967-4042-a5d0-2fee73f73770"}],"_auto_id_":"60f5908a-8fd9-4bee-a8c2-3178e05a432b"}],"name":"check_message_ts"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// If the message timestamp from the VOIP push is greater than the one we currently have stored\n// update the current one with the new one.\nif ($data > $store.variables.pushTs) {\n  if ($store.variables.debug === true) console.log(\"Message timestamp from VOIP push greater than stored value so updating to '\" + $data + \"'.\");\n  $store.variables.pushTs = $data;\n}\n$success($data);"},"actions":[],"_auto_id_":"b7b29c21-2bf5-48ea-8b6c-e3bd003e2e42"}],"name":"update_push_ts"}],"dataflows":[],"config":[{"name":"App Resume Event","type":"event","item-type":"onappresume","_auto_id_":"e1cb126e-b325-4385-85b5-2571696f1d0f","actions":[{"event":"onappresume","type":"call-api","data":{"sync":true,"name":"api_flowtime","operation":"currentgroups","params":{"user":"{{$store.variables.username}}"}},"_auto_id_":"fc06a80d-01fe-4170-80d7-6a08ee96a5f0","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"cti.utils.updatePage();"},"_auto_id_":"cb75d193-f1ca-4bf7-a804-a45899d4df0a","actions":[]}]}]},{"name":"common_css","type":"style","item-type":"css","content":"@font-face {\r\n    font-family: 'OpenSans';\r\n    src: url('user-assets/pager_opensans-regular.ttf') format('truetype');\r\n    font-weight: normal;\r\n    font-style: normal;\r\n}\r\n\r\nh1, h2, h3, h4, h5, h6, p, span {\r\n    font-family: OpenSans;\r\n}\r\n\r\nhtml, body {\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    user-select: none;\r\n}\r\n\r\nhtml {\r\n\r\n    --primary-color: #15233B;\r\n    --primary-font-color: #ffffff;\r\n\r\n    --secondary-color: #2c394e;\r\n    --secondary-font-color: #ffffff;\r\n\r\n    --header-height: 60px;\r\n\r\n    --default-font-color: #333536;\r\n    --default-font-color-light: #9d9d9d;\r\n    --default-placeholder-color: #a8a8a8;\r\n\r\n    --default-bg-color: white;\r\n    --default-bg-color-light: white;\r\n    --default-bg-color-dark: #f5f5f5;\r\n  \r\n    --default-border-color: #d9d9d9;\r\n    --default-select-border: 1px solid var(--default-border-color);\r\n\r\n    --button-primary-bg: var(--primary-color);\r\n    --button-primary-text: var(--primary-font-color);\r\n    --button-primary-border: var(--primary-color);\r\n\r\n    --button-secondary-bg: transparent;\r\n    --button-secondary-border: none;\r\n    --button-secondary-text: white;\r\n\r\n    --button-tertiary-bg: var(--group-primary-color, #64afa8);\r\n    --button-tertiary-border: 1px solid var(--group-primary-color, #64afa8);\r\n    --button-tertiary-text: var(--group-text-color, #fff);\r\n\r\n    --button-selected-bg: black;\r\n    --button-selected-border: black;\r\n    --button-selected-text: white;\r\n}\r\n\r\nhtml[theme=\"dark\"] {\r\n\r\n    --default-font-color: #fff;\r\n    --default-font-color-light: #9d9d9d;\r\n    --default-placeholder-color: #99AAB5;\r\n\r\n    --default-bg-color: #36393e;\r\n    --default-bg-color-dark: #2f3136;\r\n    --default-bg-color-light: #484b52;\r\n\r\n    --default-border-color: #484b52;\r\n\r\n    --button-secondary-bg: #484b52;\r\n    --button-secondary-border: 1px solid #000;\r\n    --button-secondary-text: #fff;\r\n\r\n    --button-cancel-bg: transparent;\r\n    --button-cancel-text: #fff;\r\n    --button-cancel-border: none;\r\n}\r\n\r\nhtml #Login {\r\n\r\n    --login-form-font-color: white;\r\n    --login-form-border-color: white;\r\n    --default-bg-color-light: #0067cf;\r\n    --default-border-color: #9b9b9b;\r\n\r\n}\r\n\r\n.switch-container .switch-text.on {\r\n    color: var(--default-font-color);\r\n}\r\n\r\n#title_bar {\r\n    flex: 0 0 var(--header-height);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    padding: 0 20px;\r\n    background: var(--primary-color, #0fb1ca);\r\n    color: var(--primary-font-color, white);\r\n}\r\n\r\n#title_bar ct-online-indicator {\r\n    flex: 0 0 auto;\r\n}\r\n\r\n#title_bar div#btnNewMessage {\r\n    margin: 0 auto;\r\n    flex: 1 1 50%;\r\n}\r\n\r\n#title_bar ct-user-display {\r\n    margin-left: auto;\r\n}\r\n\r\n#title_bar div#btnLogout {\r\n    margin: 0 10px 0;\r\n}\r\n\r\n#title_bar div.md-button-container a {\r\n    background: var(--primary-color, #0fb1ca);\r\n    color: #fff;\r\n    border: 1px solid #fff;\r\n}\r\n\r\n\r\n#staticListContainer {\r\n    padding: 0;\r\n    border: 0;\r\n    height: 100%;\r\n}\r\n\r\n#staticLogin {\r\n    background-color: #0067cf;\r\n    color: white;\r\n    display: flex;\r\n    flex-direction: column;\r\n    border: none;\r\n}\r\n\r\n#staticLogin image-viewer[name=\"ConsoleLogo\"] div {\r\n    display: flex;\r\n    margin: 10vh auto 0;\r\n}\r\n\r\n#staticLogin image-viewer[name=\"ConsoleLogo\"] div img {\r\n    margin: auto;\r\n}\r\n\r\n#staticLogin #htmlTitle h1,\r\n#staticLogin #htmlTitle h3 {\r\n    text-align: center;\r\n    font-weight: 300;\r\n}\r\n\r\n#staticLogin #htmlTitle h1 span {\r\n    font-weight: 500;\r\n}\r\n\r\n#staticLogin #htmlTitle h3 {\r\n    font-size: 18px;\r\n}\r\n\r\n#staticLogin ct-login-form {\r\n    width: 70vw;\r\n    margin: 40px auto;\r\n    color: white;\r\n}\r\n\r\n#staticLogin #htmlTerms {\r\n    margin: auto auto 0;\r\n    text-align: center;\r\n    font-size: 12px;\r\n    width: 70vw;\r\n    opacity: 0.5;\r\n}\r\n\r\n.scrollable-item {\r\n    padding: 0;\r\n}\r\n\r\n#scrlAbout {\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: var(--default-bg-color);\r\n    color: var(--default-font-color);\r\n}\r\n\r\n#scrlAbout image-viewer[name=\"ctLogo\"] div {\r\n    display: flex;\r\n    margin: 2vh auto;\r\n}\r\n\r\n#scrlAbout image-viewer[name=\"ctLogo\"] div img {\r\n    margin: auto;\r\n    height: 20vh;\r\n}\r\n\r\np.versions { \r\n    text-align: center;\r\n    color: var(--default-font-color-light);\r\n}\r\n\r\n.has-success .control-label {\r\n    color: inherit !important;  \r\n}\r\n\r\n#btnEmailLogs a {\r\n    background-color: var(--default-bg-color-light);\r\n    color: var(--default-font-color);\r\n    border: 1px solid var(--default-border-color);\r\n}\r\n\r\n@media screen and (max-width: 640px) {\r\n\r\n    #title_bar ct-user-display {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-height: 450px) {\r\n\r\n    #staticLogin image-viewer,\r\n    #staticLogin #htmlTitle,\r\n    #staticLogin #htmlTerms {\r\n        display: none;\r\n    }\r\n\r\n    #staticLogin ct-login-form {\r\n        margin: auto;\r\n    }\r\n\r\n}\r\n","_auto_id_":"2680661b-d1c6-4794-a4c4-ef081520a9c2"},{"name":"responder_css","type":"style","item-type":"css","content":"#title_bar div#btnLogout {\n    margin-left: auto;\n}\n","_auto_id_":"4c2a5b88-f82f-4efe-9d2d-65ddb74af868"},{"name":"tvfs","type":"style","item-type":"css","_auto_id_":"8e830852-2a5f-4542-92fe-c11e39524812","content":"#staticLogin {\n    background-color: #cf0000;\n}\n\n#staticLogin ct-login-form {\n\tmargin:35px auto;\n}\n\nhtml #Login {\n    --default-bg-color-light: #cf0000;\n}\n\n#staticLogin image-viewer[name=\"ConsoleLogo\"] div {\n    margin:0;\n}\n\nmd-question[item-type=\"switch\"] > div {\n  display: flex;\n}\n\nmd-question[item-type=\"switch\"] label {\n  flex-grow: 1;\n}\n\n.switch-container {\n  margin-top: 0;\n}\n\nsection#static_logo {\n  text-align: center;\n  max-height: 144px;\n  border: 0;\n}\n\nmd-content#html_group {\n  background-color: #1f314c;\n  color: white;\n  text-align: center;\n}\n\nmd-content#html_group .content-block {\n  margin: 5px 0;\n}\n\n.btn-primary {\n  background-color: var(--button-primary-bg, #15233B);\n  border: var(--button-primary-border, #15233B);\n  color: var(--button-primary-text, #fff);\n}\n\n#btnChangeGroup a {\n    background-color: var(--default-bg-color-light);\n    color: var(--default-font-color);\n    border: 1px solid var(--default-border-color);\n}\n\nsection#scrollable {\n\n    background-color: var(--default-bg-color, #fff);\n    color: var(--default-font-color, #333536);    \n}\n\nselect[name=\"select_group\"] {\n    background-color: var(--default-bg-color-light);\n    color: var(--default-font-color);\n    border: 1px solid var(--default-border-color);\n}"},{"name":"tvfs_css","type":"style","item-type":"css-asset","_auto_id_":"f001744d-9f97-4ac9-a7f0-ab037d327a7f","fileName":"tvfs 1.css"},{"name":"pl_responder","type":"pager","item-type":"responderpagerlayer","isBroadcaster":false,"enablePushNotifications":false,"options":{"enablePhotoAttachments":true,"enableAudioAttachments":true},"xmpp":{"endpoint":"wss://bucksfire-apps.cti-paging.com:443/websocket","user":{"id":"","password":"","domain":"bucksfire.cti-paging.com","resource":"Responder","displayName":"Console User","forceLowercaseJid":true,"userPersistentResource":true},"uploadHost":"upload.bucksfire.cti-paging.com","multicastHost":"multicast.bucksfire.cti-paging.com","autoLogin":true,"autoReconnect":true,"maxMessageAge":900000,"maxMessageAlertAge":900000,"enablePing":true,"pingTimeout":60000,"sentTimeout":60000,"useChatMarkers":false,"encryption":true,"fileEncryption":true,"authAttachments":true,"loginTimeout":300000,"push":{"androidEnabled":false,"senderId":"","packageId":"uk.org.tvfcs.mobilising","iosEnabled":true,"voip":true,"reLoginOnPushAndroid":false,"reLoginOnPushiOS":true},"showSecondsOnTimestamps":true,"alwaysSendPresence":true},"actions":[{"event":"pager-layer-ready","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"2849ee18-d4ac-4b80-b5ee-6217960035d2"},{"event":"login-success","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.username = pagerLayer.comms.username; \n$success();"},"_auto_id_":"65e30b7b-395b-4636-8331-bee466a69951"},{"event":"new-page-received","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.message = $data.$message;\n$success();"},"_auto_id_":"c7c6a2c1-f91e-45f2-9972-e8c6392bd755"},{"event":"new-page-received","type":"call-actionflow","data":{"name":"check_message_ts"},"_auto_id_":"b8ac67df-3274-4f6b-ae4c-0aae5ff980fb"},{"event":"new-page-received","type":"call-actionflow","data":{"name":"message_received"},"_auto_id_":"ae012b11-427a-4200-88e2-4e0f0ad60ece"},{"event":"responded-to-page","type":"call-actionflow","data":{"name":"message_responded"},"_auto_id_":"c3456a27-622b-4013-a4ae-f8be54a68303"},{"event":"pager-logout-request-confirmed","type":"call-actionflow","data":{"name":"disable_insomnia"},"_auto_id_":"53e631ed-6866-4f1c-ac39-e8e0f34cf473"},{"event":"request-make-audio-notification","type":"call-actionflow","data":{"name":"message_received"},"_auto_id_":"8fe2e5c0-cd11-4958-93b9-c03a691c58ca"},{"event":"pager-logout-request-confirmed","type":"inline-function","data":{"sync":true,"code":"// Pager layer destroys data when logging out so reset the pushTs and pageTs to keep in sync\n$store.variables.pushTs = 0;\n$store.variables.pageTs = 0;\n$success();"},"_auto_id_":"be19c7ba-79ad-4b12-aedf-b35709fe64ac"},{"event":"login-fail","type":"inline-function","data":{"sync":true,"code":"// If login fails due to invalid credentials then we need to tell the user they need to take action\nif (typeof $data === \"string\" && $data.toLowerCase().includes(\"invalid username or password\") && $store.env.foreground === false) {\n  \tif ($store.variables.debug === true) console.log(\"Login failed due to invalid username or password, showing local notification...\");\n    // Will raise a local notification within the actions tab\n\t$success();\n} else {\n    // Won't do anything\n\t$fail();\n}"},"actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"invalid_credentials"},"_auto_id_":"255f9475-b147-443c-b29c-c5b8a8c29103"}],"_auto_id_":"321e7c82-6029-49f2-9f0c-070beee7c51d"},{"event":"pager-layer-ready","type":"inline-function","data":{"sync":true,"code":"window.pagerLayer = window.CtPagerLayer.getInstance('pl_responder');\n\n/*window.pagerLayer.logger.setTypes([\"_all_\"]);\nwindow.pagerLayer.comms.client._options.debug = true;\n$store.variables.debug = true;*/\n\npagerLayer.config.filteredGroups = [\n\"Console Users\",\n\"User Management Administrators\"\n];\n\n$success();"},"_auto_id_":"f51fa3c8-c8d2-487b-95ef-ed90e7035978"},{"event":"connection-status-change","type":"inline-function","data":{"sync":true,"code":"var stopVibrateAndAudio = false;\n\nif($data.status.status === \"disconnected\") {\n    if($data.status.disconnectStatus.wontReconnect) {\n        cti.utils.callAction(\"go-to-page\", { name: \"Login\" });\n      \tstopVibrateAndAudio = true;\n    }\n    if($data.status.disconnectStatus.reason === \"Replaced by new connection\") {\n        cti.utils.callAction(\"go-to-page\", { name: \"Login\" });\n      \tstopVibrateAndAudio = true;\n    }\n    if($data.status.disconnectStatus.reason === \"Kicked by administrator\") {\n        cti.utils.callAction(\"go-to-page\", { name: \"Login\" });\n      \tstopVibrateAndAudio = true;\n    }\n    if($data.status.disconnectStatus.reason === \"Conflict\") {\n        cti.utils.callAction(\"go-to-page\", { name: \"Login\" });\n      \tstopVibrateAndAudio = true;\n    }\n}\n\n$success(stopVibrateAndAudio);"},"_auto_id_":"d684db5c-dee1-4f67-8415-b031db79ddd9"},{"event":"pager-logout-request-confirmed","type":"stop-audio","_auto_id_":"a1856090-e5d6-4ec4-8512-1966bd401c67"},{"event":"pager-logout-request-confirmed","type":"stop-vibration","_auto_id_":"deae1347-ee0d-467a-9ac9-6a007c08e14e"},{"type":"if","operations":[{"type":"value","content":"{{$data}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}],"_auto_id_":"9ebfa3a5-e827-4533-91fa-5f8df26e3f4e"},{"event":"connection-status-change","type":"stop-audio","_auto_id_":"9a0dd6d7-eb96-415f-8d03-251cdbec5950"},{"event":"connection-status-change","type":"stop-vibration","_auto_id_":"b31975ac-9920-484e-9443-a9e712658bb8"},{"type":"end-if","_auto_id_":"7ea25595-d834-41ec-bb22-f6c5c633bd00"},{"event":"pager-logout-request-confirmed","type":"go-to-page","data":{"isConditional":false,"name":"Login"},"_auto_id_":"87b347da-2dee-4b4f-a26c-7d66f1187f6f"},{"event":"pager-mute","type":"stop-vibration","_auto_id_":"fc1f822a-1b93-4014-b9b6-c3e045561dfa"},{"event":"pager-mute","type":"stop-audio","_auto_id_":"6635ff7e-537a-4bd6-97a3-7c49e9fab556"},{"event":"login-success","type":"go-to-page","data":{"name":"PagerList","isConditional":false},"_auto_id_":"71a7ccc4-7ce7-41f2-a0e8-eb3552531554"}],"_auto_id_":"7d7ac356-5196-48f5-8425-1ad642564994"},{"name":"fn_auto_day_night_theme","type":"scripting","item-type":"function","_auto_id_":"6d902889-7bf5-45ae-8114-ee5e72c156a8","sync":true,"params":[],"content":"console.debug(\"Automatic Day/Night check\");\nif (cti.store.pages.About && cti.store.pages.About.switchThemeAutomatic) {\n    /*Lat long for centre of oxford - this will be called once hour*/\n    var times = SunCalc.getTimes(new Date(), 51.7520, 1.2577);\n    \n    var d = new Date();\n    if (d < times.dawn || d >= times.dusk) {\n        //Apply dark theme\n        console.debug(\"Theme should be dark\");\n        cti.utils.callAction(\"common-change-theme\", {\n            \"layer\": \"pl_responder\"\n            , \"themeName\": \"dark\"\n        });\n        //Update the UI\n        cti.store.pages.About.switchTheme = true;\n    }\n    else {\n        //Apply light theme\n        console.debug(\"Theme should be light\");\n        cti.utils.callAction(\"common-change-theme\", {\n            \"layer\": \"pl_responder\"\n            , \"themeName\": \"\"\n        });\n        //Update the UI\n        cti.store.pages.About.switchTheme = false;\n    }\n}"},{"name":"js_suncalc","type":"scripting","item-type":"js-asset","_auto_id_":"762647b2-e2db-440a-9fce-e48c9bcb62c7","fileName":"suncalc 1.js"},{"name":"stored_volume","type":"scripting","item-type":"variable","variable-type":"string","_auto_id_":"082b2919-9228-4c1b-8262-7596992ff2e2"},{"name":"App Load Event","type":"event","item-type":"onappload","actions":[{"event":"onappload","type":"inline-function","data":{"sync":true,"code":"if ($store.env.platform.name === \"ios\") {\n  \tsetTimeout(() => {\n    \twindow.plugins.insomnia.disable(() => {}, (e) => { \n      \t\tconsole.error(\"There was an error disabling Insomnia, the app will continue to be kept running in the background:\", e);\n    \t});\n    }, $store.preferences.insomniaLimit || 60000);\t  \n}\n\n//if ($store.env.platform.name === \"android\") {\n//\twindow.plugins.insomnia.switchOnScreenAndForeground(() => {}, () => {}, {\"showWhenLocked\": false, \"turnScreenOn\": true, \"dismissKeyGuard\": false, \"keepScreenOn\": true });\n//}\n\n$success();"},"actions":[],"_auto_id_":"5aea89af-881a-4d52-bf8b-4c6a2dc61e68"},{"event":"onappload","type":"get-media-volume","data":{"streamId":"music"},"_auto_id_":"f1d503f8-2c6d-40c5-a34e-1a197b908404"},{"event":"onappload","type":"set-variable","data":{"name":"stored_volume","value":"{{$data}}"},"_auto_id_":"fe3acff3-e52e-47c3-9df4-bb1e8089c857"},{"event":"onappload","type":"inline-function","data":{"sync":true,"code":"setInterval(cti.fn_auto_day_night_theme, 60000);\n$success();"},"_auto_id_":"95c1b364-158c-440e-86e9-a2cc0b7c1b47"}],"_auto_id_":"e3322622-5de1-4d3d-85b7-564a3547ac6a"},{"name":"OpenSans","type":"style","item-type":"font-asset","fileName":"pager_opensans-regular.ttf","_auto_id_":"7292c985-62e6-42f0-a009-4651be08bf7f"},{"name":"OpenSansBold","type":"style","item-type":"font-asset","fileName":"pager_opensans-bold.ttf","_auto_id_":"4c2f3808-9e48-4511-9460-612d22f31b28"},{"name":"on_voip_push","type":"notification","item-type":"voip-push-event","operations":[{"type":"value","content":"1","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"1","$selected":false}],"actions":[{"type":"inline-function","data":{"sync":true,"code":"// Get the timestamp from the push, if any.\nif ($store.variables.debug === true) console.log(\"Got a new VOIP push message:\", $data.$notification);\nif ($data.$notification && $data.$notification.payload && $data.$notification.payload.timestamp) {  \t\n\tlet ts = null;\n  \ttry {\n      \tts = parseInt($data.$notification.payload.timestamp);\n    } catch (e) {\n     \tconsole.error(\"Couldn't parse the message timestamp from the VOIP push message:\", e);\n    }\n  \t// Also check to make sure we've not already had a message with this timestamp\n  \tif (ts !== null && ts > $store.variables.pageTs) {\n        if (window.VoIPPushNotification) window.VoIPPushNotification.cancelExitApp();\n    \t$success(ts);\n    }\n}\n// If there is no timestamp or we have already dealt with newer messages dont do anything, no need to even call subsequent items in this flow\n"},"_auto_id_":"ea63eb9d-4856-4b58-be4b-c733e706c262","actions":[]},{"type":"call-actionflow","data":{"name":"update_push_ts"},"_auto_id_":"7b32ee3a-750e-4e97-9902-20546e078ae9"},{"type":"call-actionflow","data":{"name":"enable_insomnia"},"_auto_id_":"c9c81403-f586-4fa4-8445-ff5894120297"},{"type":"inline-function","data":{"sync":true,"code":"// Only show a local notification if the user is logged in\nconst pagerLayer = window.CtPagerLayer.getInstance(\"pl_responder\");\nif (pagerLayer.getCurrentUserJid()) {\n\t$success(); // Show the local notification, trigger within the actions tab of this inline function  \n} else {\n\t$fail(); // Don't show the local notification\n}"},"actions":[{"event":"success","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"local_notification_1"},"_auto_id_":"c38f82c1-4a61-4b54-9f77-2368e42c7fe2"}]}],"_auto_id_":"8a43eb05-6908-4010-ae48-59f277080ed4"},{"name":"App Foregrounded Event","type":"event","item-type":"onforeground","_auto_id_":"612b5c97-856d-43ac-80c4-1cda359eeb91","actions":[{"event":"onforeground","type":"inline-function","data":{"sync":true,"code":"if (window.VoIPPushNotification) window.VoIPPushNotification.cancelExitApp();\n$success();"},"_auto_id_":"800f5e8a-0eab-413e-93f8-ad32ef62eea6"}]},{"name":"App Backgrounded Event","type":"event","item-type":"onbackground","_auto_id_":"eba7e239-1ded-4016-848f-a1f50cd51c1a","actions":[{"event":"onbackground","type":"inline-function","data":{"sync":true,"code":"if (window.VoIPPushNotification) window.VoIPPushNotification.exitApp();\n$success();"},"_auto_id_":"fdf9aad8-263e-4423-98a2-614cc4b71d41"}]},{"name":"pushTs","type":"scripting","item-type":"variable","variable-type":"int","value":"0","_auto_id_":"7c6b4640-4d10-4786-b52f-3198aa6d3287"},{"name":"debug","type":"scripting","item-type":"variable","variable-type":"boolean","value":"true","_auto_id_":"7006effa-2a77-4568-926a-9a5fc28bfa48"},{"name":"pageTs","type":"scripting","item-type":"variable","variable-type":"int","value":"0","_auto_id_":"2868228b-1d68-47af-9fcf-cbb820a31e0b"},{"name":"api_flowtime","type":"integration","item-type":"api","_auto_id_":"f10261bb-e9be-4ad9-9289-d84206e018cb","headers":{},"params":[],"operations":[{"name":"currentgroups","method":"GET","path":"currentgroups","summary":"Obtains a list of current groups for this user","params":[{"name":"user","type":"string","description":"The current user and domain","in":"query","required":true},{"name":"Authorization","type":"string","description":"Shared secret for the api","in":"header","default":"mkuunrukarKT7TYZoRm0"}],"responses":[],"$open":false,"ttlMinutes":60,"content-type":"application/json"},{"name":"groups","method":"GET","path":"groups","summary":"Gets a list of comms groups for this user","params":[{"name":"user","type":"string","description":"The current user and domain","in":"query","required":true},{"name":"Authorization","type":"string","description":"-","in":"header","default":"mkuunrukarKT7TYZoRm0"}],"responses":[],"$open":false,"ttlMinutes":60,"content-type":"application/json"},{"name":"changegroup","method":"POST","path":"movegroup","summary":"Changes the current users group","params":[{"name":"user","type":"string","description":"The current user and domain","in":"body","required":true},{"name":"groupid","type":"string","description":"The group id to move to","in":"body","required":true},{"name":"Authorization","type":"string","description":"-","in":"header","default":"mkuunrukarKT7TYZoRm0"}],"responses":[],"$open":false,"ttlMinutes":60,"content-type":"application/json"}],"url":"https://tvfcrs.cti-paging.com/","definitions":{}},{"name":"api_error","type":"notification","item-type":"app-notification","_auto_id_":"b3145915-1858-4c98-a3b4-eaa54d332437","options":{},"style":"error","title":"Connection Error","text":"Please check your internet connection"},{"name":"local_notification_1","type":"notification","item-type":"device-notification","interactions":[],"title":"New Page","text":"You have a new Page, press here to view it.","_auto_id_":"a90abe14-2a27-461b-b04b-2d35069b77b3"},{"name":"in_alert","type":"scripting","item-type":"variable","_auto_id_":"d886c413-c3f5-4c6b-b8c3-0565dc01c955","variable-type":"string","value":"false"},{"name":"invalid_credentials","type":"notification","item-type":"device-notification","interactions":[],"title":"Unable to login","text":"Your credentials are no longer valid, please login again to continue to receive pages.","_auto_id_":"8d53929c-f6c3-4dd5-a6d2-c25b9c72bd0b"}],"components":[],"id":"0e585fee-17c2-43f7-88c0-ab6e4c060ac9","name":"Resp_Bucks_Debug","packageId":"uk.org.tvfcs.mobilising","metadata":{"78836404-a7cc-4ca7-ac3f-85e7d3335fd9":{"value":"Bucks 1.8.1","key":"customerReleaseNumber","externallyConfigurable":false},"df02efb0-d879-4481-9af5-8ead076e34f7":{"value":"NOT USED ANYMORE","key":"appBuildNumber","externallyConfigurable":false},"d99f835d-a670-46fa-a6ee-4634dc2cbc79":{"value":"1322","key":"studioBuildNumber","externallyConfigurable":false}},"icondata":"FirePaging-Rounded.png","displayName":"Responder","jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiIwZTU4NWZlZS0xN2MyLTQzZjctODhjMC1hYjZlNGMwNjBhYzkiLCJhcHBfbmFtZSI6IlJlc3BfQnVja3NfRGVidWciLCJidWlsZF9pZCI6ImRhNTMzNTdiLTQ2MjctNGQwZC1hMTI2LTZmYzY5M2Q3YjM1ZiIsImNsaWVudF9pZCI6ImYxMWE5NTQ1LWM1YWQtNGQzMy04NTU1LWRhNjQ1NmNkNTQzOCIsImNsaWVudF9zZWNyZXQiOiJXVU5wU1VaYVRXaHRNR1U1UkhWbU1ucG9TMHhMWnowOSIsImV4cCI6MjMzMTQxNzYwMCwiZnJlcXVlbmN5IjoibmV2ZXIiLCJoYXNoIjoiY2MzNmYxNGNiNjU2YWNiYTg5NWQyOWU0N2UzZjBkMTI0ZThhN2ZiNjgxZjg3ZDZmODllNTY5MmM5NjgxOGRmZSIsImxpY19leHAiOjIzMjg4MjU2MDAsImxwX2lkIjoiMmFjNjdhYjItZDg3OC00N2Q1LWJkMmQtZGU0ZWQzMTIxYWQwIiwicGFja2FnZV9pZCI6InVrLm9yZy50dmZjcy5tb2JpbGlzaW5nIiwicmVmcmVzaF90b2tlbiI6Ilp6UmplWG8zZEN0T1QxQkVTbUYyTWxGcWMyUlViRlV6ZFd0QmFtRnNRMDlpWjBKVlJsRXhVRFpIYnowPSIsInR5cGUiOiJmdWxsIiwiaWF0IjoxNjMyOTA1Nzk3fQ.Rl-Q4NTHpyQuIGXb0NFU_zhZLm3PZI3m557Go71W6Q5jHJtOQIvj6VyxXE9AC-p14JgXN119QrYBcoN2mS92BP-hCpIW9FWoBaljb3B1z5dHqi-aJCcW6soXUcdvck2QWm_8ZP2yoRCc76tgPvcS7rdySXv5Q6dxTnk9N4hdJjVxMcUQ1OZH8JxTYOMR5WN9a4u1uJ0cwwcr7UNUYBnx4bz2vQRAGOGMDuJSl3h3QRDfOxPYja_Ii4NNEoT1Hz6Gniwwv4o3P-e5hecLNL9LrBeTIhESFibYJnvAnkte13WuZ7LPxSMtAe132hHCNvyvjhh9nczT87BptxuA0v5x7g","buildId":"da53357b-4627-4d0d-a126-6fc693d7b35f","hostContext":0}